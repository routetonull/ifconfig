<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.16-DEV" />

  <title>HP switches: copy configuration between different device models &middot; ifconfig.it</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.2/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.2/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.2/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://www.ifconfig.it/hugo/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://www.ifconfig.it/hugo/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://www.ifconfig.it/hugo/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://www.ifconfig.it/hugoimg/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="https://www.ifconfig.it/hugo/">ifconfig.it</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://www.ifconfig.it/hugo/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://www.ifconfig.it/hugo/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://www.ifconfig.it/hugo/tags/"><i class='fa fa-list fa-fw'></i>Tags</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://www.ifconfig.it/hugo/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/gp_ifconfig" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/gpaolo" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/routetonull" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>HP switches: copy configuration between different device models</h1>
  <h2></h2>
</div>
<div class="content">
  

<p>A couple of days ago I did a planned software upgrade of an HP5406zl.</p>

<p>Since the installed firmware version was quite old it was not possible to update directly to the latest release, an upgrade path must be followed:</p>

<p><img src="https://pbs.twimg.com/media/BySgMiJCYAEIy7h.png" alt="" /></p>

<p>This is how it went:</p>

<!-- more -->

<p><a href="http://www.ifconfig.it/images/20140924_163756.jpg"><img src="http://www.ifconfig.it/images/20140924_163756-1024x576.jpg" alt="hp upgrade bad" /></a></p>

<p>A faulty flash killed the switch so it was replaced with a spare part, an HP5412zl, the same switch but with twelve modules instead of six.</p>

<h2 id="problem:6bae79e618ece368f3cadd585e1b7807">Problem</h2>

<p>Copy the old config to the new switch caused a &ldquo;wrong file&rdquo; error message.</p>

<h2 id="how-to-fix:6bae79e618ece368f3cadd585e1b7807">How to fix</h2>

<p>The switch configuration file starts with a definition of the model.</p>

<p>This is on a 5406zl:</p>

<pre><code>; J8697A Configuration Editor; Created on release #K.15.14.0007
; Ver #05:18.7f.ff.3f.ef:4d
</code></pre>

<p>And this on a 5412zl:</p>

<p>; J8698A Configuration Editor; Created on release #K.15.10.0009</p>

<pre><code>; Ver #03:03.1f.ef:f0
</code></pre>

<p>Just replace those two lines with the correct model and the configuration will be loaded correctly.</p>

<h2 id="lesson-learned:6bae79e618ece368f3cadd585e1b7807">Lesson learned</h2>

<p>Always backup the configuration before any change or software upgrade. This single step, skipped by many network engineers, saved me so many times.</p>

<p>Be ready for the worse. My company has spare parts for almost all the devices installed to customers, this HP5412zl has enough modules and features to replace most switches we install so it&rsquo;s good to know it&rsquo;s there just in case.</p>

<h2 id="how-it-ended:6bae79e618ece368f3cadd585e1b7807">How it ended</h2>

<p>HP replaced the switch (lifetime warranty for the FTW!), I did the upgrade in a test environment, copied the configuration and put it back where it belongs.</p>

</div>

</div>
</div>
<script src="https://www.ifconfig.it/hugojs/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-10670358-1', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>

