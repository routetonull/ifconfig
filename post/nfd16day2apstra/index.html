<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.26" />

  <title>NFD16 day two - Apstra &middot; ifconfig.it</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://www.ifconfig.it/hugo/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://www.ifconfig.it/hugo/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://www.ifconfig.it/hugo/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://www.ifconfig.it/hugoimg/favicon.ico" type="image/x-icon" />

  
  

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-2507441616057251",
    enable_page_level_ads: true
  });
</script>
  
</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="https://www.ifconfig.it/hugo/">ifconfig.it</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://www.ifconfig.it/hugo/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://www.ifconfig.it/hugo/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://www.ifconfig.it/hugo/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://www.ifconfig.it/hugo/tags/"><i class='fa fa-list fa-fw'></i>Tags</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/gp_ifconfig" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://instagram.com/gpboa" target="_blank"><i class="fa fa-instagram fa-fw"></i>Instagram</a>
    </li>
    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/gpaolo" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/routetonull" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://keybase.io/bgp" target="_blank"><i class="fa fa-key fa-fw"></i>Keybase</a>
    </li>
    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>NFD16 day two - Apstra</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
	<time>Friday, September 29, 2017
	</time>
  </div>

  

  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://www.ifconfig.it/hugotags/networking">networking</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://www.ifconfig.it/hugotags/techfieldday">techfieldday</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://www.ifconfig.it/hugotags/nfd16">nfd16</a>
    
  </div>
  
  

</div>

  

<p>Day two of <a href="http://techfieldday.com/event/nfd16/">NFD16</a> started with <a href="http://www.apstra.com/">Apstra</a> and their intent-based networking system.</p>

<p>Intent concept is not as broad as SDN but still vendors have different views of this meaning.</p>

<p>According to Apstra an intent is &ldquo;the definition of the expected outcome&rdquo;. The sum of the intents of a network is the source of truth.</p>

<p>Read <a href="http://blog.apstra.com/intent-based-networking-what-is-it">Sasha Ratkovic blog post</a> about the definition of Intent Based Networking. The checklist he suggest can be very useful to compare different solutions and <a href="http://blog.apstra.com/the-dirty-truth-about-intent-washing">spot intent washing strategies</a>.</p>

<p>That&rsquo;s quite a leap from today&rsquo;s networks where the intent is distributed on the configuration of the devices and there&rsquo;s no easy way to have a global view or validate the intents (see my <a href="https://www.ifconfig.it/hugo/post/nfd16day1veriflow/">Veriflow</a> post).</p>

<h2 id="apstra-overview">Apstra overview</h2>

<p>Go to <a href="http://www.apstra.com/resources/#white_papers">Apstra website</a> or watch <a href="https://www.youtube.com/watch?v=xnb0Y1LTbew&amp;list=PLinuRwpnsHafgjtdfqok8aGVdjsEGffcl">NFD16 recordings</a> for details of how their product works, I&rsquo;ll share here only my quick notes.</p>

<p>Apstra&rsquo;s input is the intent, it applies semantic validation to prevent errors, verifies rules and constrains are respected.</p>

<p>After this there&rsquo;s the <em>expectation rendering</em> phase where the actual device configuration is generated, automatic unit tests are created, and the configuration is pushed to the devices.</p>

<p>Sounds cool uh? Yes it is!</p>

<h2 id="apstra-takeaways">Apstra takeaways</h2>

<p>Apstra solution is powerful but it&rsquo;s architecture has usability in mind so it&rsquo;s simple. A total of 6 configuration files generate up to 300 lines of python code to start automating the network.</p>

<p>For every line of code Apstra generates 3 lines of testing to validate the intent, they don&rsquo;t really want to mess with the network.</p>

<blockquote class="twitter-tweet"><p lang="en" dir="ltr"><a href="https://twitter.com/ApstraInc?ref_src=twsrc%5Etfw">@ApstraInc</a> : &quot;3 lines of test per line of code&quot;. Do you spend the same amount of time when manually configuring devices via cli?  <a href="https://twitter.com/hashtag/NFD16?src=hash&amp;ref_src=twsrc%5Etfw">#NFD16</a></p>&mdash; Gian Paolo (@gp_ifconfig) <a href="https://twitter.com/gp_ifconfig/status/908372395139915776?ref_src=twsrc%5Etfw">September 14, 2017</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>It is possible to extend the schema of the model of the network to add further information and create new intents.</p>

<p>The approach of the backup is different than Veriflow&rsquo;s and other similar solutions. Apstra doesn&rsquo;t backup devices configurations but it creates a <em>snapshot of intent</em> that can be used to generate all the configuration on the fly.</p>

<p>The snapshot can be used to rollback the network to a previous state.</p>

<p>Intent is not pushed immediately to the network when a change is made. There&rsquo;s a staging area that can be verified and inspected before committing configurations to the devices.</p>

<h2 id="wrap-up-apstra">Wrap up Apstra</h2>

<p>Pushing <em>intents</em> generated configuration changes on a live network requires a blind trust of the product.</p>

<p>It is possible to inspect the changes before they are applied but it doesn&rsquo;t make sense to insert an human-validated step in between an automated process. It simply doesn&rsquo;t scale.</p>

<p>The snapshot feature allows what DevOps call <em>fail fast</em> to be applied to the network.</p>

<p><strong>Fail fast</strong> is not promoting <em>fail</em> but the focus is on the <em>fast</em>. Can we detect a failure/outage <em>fast</em> after it happens? Can we recover <em>fast</em> to the previous state?</p>

<p>With tools like Apstra a Network Engineer has the ability to perform a <em>fast recovery</em> with <em>intent snapshot</em> rollback if network telemetry notices something was wrong in the intent deployment.</p>

<p><strong>That&rsquo;s NetDevOps!</strong></p>

<p><em>Final note:</em> I strongly suggest to use an <a href="https://en.wikipedia.org/wiki/Out-of-band_management">OOB management</a> channel, there&rsquo;s no chance to recover the network if connectivity is lost (or use <em>&ldquo;reload in&rdquo;</em> but it doesn&rsquo;t scale)*.</p>

<h2 id="disclaimer">DISCLAIMER</h2>

<p><em><a href="http://techfieldday.com">Tech Field Day (TFD)</a> is a commercial activity for TFD and the presenting companies. When I attend TFD events my travel and accommodation expenses are usually paid for by TFD. At the events, most of my meals are provided by TFD. In addition, the companies that present at TFD usually give the delegates gifts. At TFD the presenting companies engage with delegates to educate us about their products and services. The smart companies also want to learn from delegates (a few are very smart about this). The aim of the event is to help the presenting companies connect with delegates. Ultimately get the company’s message spread by delegates. Usually, delegates will write about some or all of the presenting companies.</em></p>

<p><em>Neither the TFD staff nor the presenting companies get to review what the delegates write. There is no obligation on delegates to write about any or all presenters. Nor is there an obligation to write nice things about presenters. In fact, the greatest expectation is that delegates will be honest in any writing that they do.</em></p>

<p><em>This (ifconfig.it) is my personal blog. Everything I write here is my thoughts and opinions.  None of it is reviewed by the organizations I write about before publication. I could get corrections from the companies I write about and may incorporate the parts I agree with into my posts here.</em></p>


  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2507441616057251"
     data-ad-slot="5064206496"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  
  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://www.ifconfig.it/hugo/post/nfd16day1arista/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://www.ifconfig.it/hugo/post/nfd16day1arista/">NFD16 day one - Arista</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://www.ifconfig.it/hugo/post/ismoretechgoodforbusiness/">Is more technology good for your business?</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://www.ifconfig.it/hugo/post/ismoretechgoodforbusiness/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'ifconfig';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2507441616057251"
     data-ad-slot="2220017315"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  
</div>

</div>
</div>
<script src="https://www.ifconfig.it/hugojs/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-10670358-1', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>

